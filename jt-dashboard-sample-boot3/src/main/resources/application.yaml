
server:
  port: 9090

jt-dashboard:
  server:
    static-application-registrator:
      enabled: true
      jt1078-applications:
        - name: ${spring.application.name}
          base-url: http://101.43.46.146:1078
          host: 101.43.46.146
          http-port: 1078
          tcp-port: 61078
          udp-port: 0
          metadata:
            role: 1078-server(static)
      jt808-applications:
        - name: ${spring.application.name}
          base-url: http://node2:808
          metadata:
            notes: 808-server(static)

spring:
  cloud:
    gateway:
      enabled: true
      httpclient:
        pool:
          type: elastic
          max-idle-time: 45s
          eviction-interval: 1m
        response-timeout: 30s
        connect-timeout: 200
      routes:
        - id: jt-808-server
          #uri: http://localhost:808
          uri: http://node2:808
          predicates:
            - Path=/api/jt808/**
          filters:
            - RewritePath=/api(?<segment>/?.*), $\{segment}
          metadata:
            connect-timeout: 200
            response-timeout: 30000
        - id: jt-1078-server
          uri: http://localhost:1078
          #uri: http://node2:1078
          predicates:
            - Path=/api/jt1078/**
          filters:
            - RewritePath=/api(?<segment>/?.*), $\{segment}
          metadata:
            connect-timeout: 200
            response-timeout: 30000
